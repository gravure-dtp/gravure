<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Debian Packaging</title>
		<meta name='Generator' content='Zim 0.56'>
		
		<link rel="stylesheet" href='../../../_resources/style.css' type="text/css"
        media="screen" />
		
		<style type='text/css'>
			span.insen { color: grey                }
			.menu{
                clear: both;
                text-align: left;
			}
			
			.menu li { 
	            margin: 0; 
	            padding: 0; 
	            list-style: none; 
            }

            .menu li ul { 
	            margin: 0 0 0 0; 
	            padding: 0 0 0 0;
	            border: 0; 
            }
		
			.notebook{font-variant: small-caps;
					color:#4e9a06;
					padding: 0px 20px;}
			hr{clear:both;}
		</style>
		
	</head>
	<body>
	    <div class="header">
	    <div class="status">
	        <th1>-</th1>
	    </div>
	    </div>
	    
	    <div class="header">
            <div class="logo">
                <img src='../../../_resources/logo.png' alt="logo" />
            </div>
            <div class="title"><small>Documentations : Debian Packaging</small></div>
            </br>
        </div>
            
        <div class="mainmenu">
        <th1>
            <a href='../../../../index.html'>Home</a>
            <a href='../../../../doc/trunk/www/GRAVURE.html'>Documentation</a>
            <a href='../../../../timeline'>Timeline</a>
            <a href='../../../../dir?ci=tip'>Code</a>
            <a href='../../../../brlist'>Branches</a>
            <a href='../../../../taglist'>Tags</a>
            <a href='../../../../reportlist'>Tickets</a>
            <a href='../../../../wiki'>Wiki</a>
        </th1></div>     
            
        <div class="container">    
			<div class="heading span-6 last">
				
			</div>
 
			<div class="menu span-2">
				<ul>
<li><a href="../../../FOSSIL_REPOSITORY.html" title="FOSSIL REPOSITORY">FOSSIL REPOSITORY</a></li>
<li><a href="../../../GRAPHIC_LIBRARY.html" title="GRAPHIC LIBRARY">GRAPHIC LIBRARY</a></li>
<li><a href="../../../GRAVURE.html" title="GRAVURE">GRAVURE</a></li>
<ul>
<li><a href="../../COLOR_MANAGMENT.html" title="COLOR MANAGMENT">COLOR MANAGMENT</a></li>
<li><a href="../../GRAVURE_GHOSCRIPT_DEVICE.html" title="GRAVURE GHOSCRIPT DEVICE">GRAVURE GHOSCRIPT DEVICE</a></li>
<li><a href="../../IMPOSITION.html" title="IMPOSITION">IMPOSITION</a></li>
<li><a href="../../POSTSCRIPT.html" title="POSTSCRIPT">POSTSCRIPT</a></li>
<li><a href="../../PYTHON.html" title="PYTHON">PYTHON</a></li>
<li><a href="../../scenario_CMM.html" title="scenario CMM">scenario CMM</a></li>
<li><a href="../../VUE_GENERALE.html" title="VUE GENERALE">VUE GENERALE</a></li>
<ul>
<li><a href="../id%C3%A9e_de_distribution.html" title="idée de distribution">idée de distribution</a></li>
<li><a href="../PACKAGING_%26_DISTRIBUTION.html" title="PACKAGING &amp; DISTRIBUTION">PACKAGING &amp; DISTRIBUTION</a></li>
<ul>
<li><strong>Debian Packaging</strong></li>
<li><a href="./Debian_repository.html" title="Debian repository">Debian repository</a></li>
<li><a href="./ghostscript.html" title="ghostscript">ghostscript</a></li>
<li><a href="./Nemo.html" title="Nemo">Nemo</a></li>
<li><a href="./ToDo.html" title="ToDo">ToDo</a></li>
</ul>
<li><a href="../PRINTING.html" title="PRINTING">PRINTING</a></li>
</ul>
</ul>
<li><a href="../../../TRC.html" title="TRC">TRC</a></li>
</ul>

			</div>
			
			
			<div class="content span-3 last">
			<!-- Wiki content -->
				<p>
Created lundi 31 décembre 2012<br>
<a href="http://www.isalo.org/wiki.debian-fr/index.php?title=Gestion_des_archives_sous_Debian" title="http://www.isalo.org/wiki.debian-fr/index.php?title=Gestion_des_archives_sous_Debian">http://www.isalo.org/wiki.debian-fr/index.php?title=Gestion_des_archives_sous_Debian</a><br>
</p>

<h3>Chartes Debian</h3>
<p>
<a href="http://www.debian.org/doc/devel-manuals#devref" title="http://www.debian.org/doc/devel-manuals#devref">http://www.debian.org/doc/devel-manuals#devref</a><br>
<a href="http://ftp-master.debian.org/REJECT-FAQ.html" title="http://ftp-master.debian.org/REJECT-FAQ.html">http://ftp-master.debian.org/REJECT-FAQ.html</a><br>
<a href="http://lists.debian.org/debian-devel-announce/2006/03/msg00023.html" title="http://lists.debian.org/debian-devel-announce/2006/03/msg00023.html">http://lists.debian.org/debian-devel-announce/2006/03/msg00023.html</a><br>
<a href="http://www.debian.org/doc/debian-policy/index.html#contents" title="http://www.debian.org/doc/debian-policy/index.html#contents">http://www.debian.org/doc/debian-policy/index.html#contents</a><br>
</p>

<h3>GNU AutoTools</h3>
<p>
<a href="http://www.gnu.org/software/autoconf/" title="http://www.gnu.org/software/autoconf/">http://www.gnu.org/software/autoconf/</a><br>
<a href="http://www.lrde.epita.fr/~adl/dl/autotools.pdf" title="http://www.lrde.epita.fr/~adl/dl/autotools.pdf">http://www.lrde.epita.fr/~adl/dl/autotools.pdf</a><br>
<a href="http://www.gnu.org/prep/standards/" title="http://www.gnu.org/prep/standards/">http://www.gnu.org/prep/standards/</a><br>
<a href="http://inti.sourceforge.net/tutorial/libinti/autotoolsproject.html" title="http://inti.sourceforge.net/tutorial/libinti/autotoolsproject.html">http://inti.sourceforge.net/tutorial/libinti/autotoolsproject.html</a><br>
</p>

<h3>Debian packaging guides</h3>
<p>
→ <a href="http://www.debian.org/doc/manuals/maint-guide/index.fr.html" title="http://www.debian.org/doc/manuals/maint-guide/index.fr.html">http://www.debian.org/doc/manuals/maint-guide/index.fr.html</a><br>
→ <a href="http://wiki.debian.org/IntroDebianPackaging" title="http://wiki.debian.org/IntroDebianPackaging">http://wiki.debian.org/IntroDebianPackaging</a><br>
→ <a href="http://www.debian.org/doc/packaging-manuals/python-policy/" title="http://www.debian.org/doc/packaging-manuals/python-policy/">http://www.debian.org/doc/packaging-manuals/python-policy/</a><br>
<a href="http://www.debian.org/devel/wnpp/prospective" title="http://www.debian.org/devel/wnpp/prospective">http://www.debian.org/devel/wnpp/prospective</a><br>
<a href="http://rcrowley.org/articles/packaging.html" title="http://rcrowley.org/articles/packaging.html">http://rcrowley.org/articles/packaging.html</a><br>
</p>

<h3>Construire un paquet</h3>

<p>
<ul>
<li><code>sudo mk-build-deps -ir</code></li>
<li>dpkg-buildpackage ou debuild</li>
<li>pbuilder</li>
</ul>
</p>

<h3>Environnement pbuilder</h3>
<p>
→ <a href="http://www.megatunix.com/blog/2012/05/09/using-pbuilder-for-making-debianubuntu-packages/" title="http://www.megatunix.com/blog/2012/05/09/using-pbuilder-for-making-debianubuntu-packages/">http://www.megatunix.com/blog/2012/05/09/using-pbuilder-for-making-debianubuntu-packages/</a><br>
→ <a href="http://wiki.debian.org/PbuilderTricks" title="http://wiki.debian.org/PbuilderTricks">http://wiki.debian.org/PbuilderTricks</a><br>
</p>

<p>
<ul>
<li>apt-cacher-ng | pbuilder | debootstrap | quilt</li>
<li>/usr/lib/pbuilder/hooks</li>
<li>/var/cache/pbuilder/repo</li>
<li><a href="../../../../../../../../../usr/lib/pbuilder/hooks/D05deps" title="/usr/lib/pbuilder/hooks/D05deps">/usr/lib/pbuilder/hooks/D05deps</a></li>
<li><a href="../../../../../../../../../etc/pbuilderrc" title="/etc/pbuilderrc">/etc/pbuilderrc</a> → fusion de toutes la conf ici</li>
<li>~<strike>(root)/.pbuilderrc</strike></li>
</ul>
<code>for arch in `echo i386 amd64` ; do for dist in `echo testing unstable stable` ; do sudo DIST=${dist} ARCH=${arch} pbuilder --create --architecture ${arch} --distribution ${dist}  --http-proxy http://localhost:3142 ; done ; done</code><br>
</p>

<p>
<code>sudo DIST=testing ARCH=amd64 pbuilder --create --architecture amd64 --distribution testing --http-proxy  http://localhost:3142</code><br>
</p>


<p>
<ul>
<li><code>pdebuild --architecture &lt;i386|amd64&gt;  --buildresult /tmp --pbuilderroot "sudo DIST=&lt;unstable|stable|testing|hardy|lucid|natty|oneiric|precise&gt; ARCH=&lt;i386|amd64&gt;"</code></li>
</ul>
</p>

<p>
<code>pdebuild --architecture amd64  --buildresult /tmp --pbuilderroot "sudo DIST=testing ARCH=amd64"</code><br>
</p>


<h4>cdbs</h4>
<p>
<a href="http://debathena.mit.edu/packaging/" title="http://debathena.mit.edu/packaging/">http://debathena.mit.edu/packaging/</a><br>
<a href="http://cdbs-doc.duckcorp.org/en/cdbs-doc.xhtml#id467909" title="http://cdbs-doc.duckcorp.org/en/cdbs-doc.xhtml#id467909">http://cdbs-doc.duckcorp.org/en/cdbs-doc.xhtml#id467909</a><br>
<a href="http://doc.ubuntu-fr.org/projets/paquets/creer_un_paquet_avec_cdbs" title="http://doc.ubuntu-fr.org/projets/paquets/creer_un_paquet_avec_cdbs">http://doc.ubuntu-fr.org/projets/paquets/creer_un_paquet_avec_cdbs</a><br>
python →  <a href="https://wiki.edubuntu.org/PackagingGuide/Python" title="https://wiki.edubuntu.org/PackagingGuide/Python">https://wiki.edubuntu.org/PackagingGuide/Python</a><br>
</p>


<h3>Signing package</h3>

<h4>Creating a new GPG key</h4>
<p>
<a href="http://keyring.debian.org/creating-key.html" title="http://keyring.debian.org/creating-key.html">http://keyring.debian.org/creating-key.html</a><br>
<a href="http://www.gnupg.org/howtos/fr/GPGMiniHowto-3.html" title="http://www.gnupg.org/howtos/fr/GPGMiniHowto-3.html">http://www.gnupg.org/howtos/fr/GPGMiniHowto-3.html</a><br>
</p>

<h4>signing</h4>
<p>
Packages will be automatically signed as long as the name and email address in your package’s changelog file are the same as that of the GPG key you created.<br>
This means that simply running <strong>dpkg-buildpackage</strong> will now give you signed packages.<br>
</p>

<p>
If you want to resign an existing debian package, for example if you’re setting up your own backport of a package (as with my usecase, backporting Chef 0.9.16 into debian), then this is very easy too if you already have a GPG key set up. We use a tool called <strong>dpkg-sig</strong>.<br>
</p>

<p>
<code>$ dpkg-sig --sign-changes full --sign builder mypackage_0.1.2_amd64.deb</code><br>
</p>

<h3>Verification apres construction</h3>
<p>
<a href="http://www.debian.org/doc/manuals/maint-guide/checkit.fr.html" title="http://www.debian.org/doc/manuals/maint-guide/checkit.fr.html">http://www.debian.org/doc/manuals/maint-guide/checkit.fr.html</a><br>
</p>

<p>
<ul>
<li>verification de nom de fichier en conflit avec <strong>apt-file</strong></li>
</ul>
<div style='padding-left: 30pt'>
    <code>apt-file update</code><br>
<code>apt-file search -D nemo_1.1.2_amd64.deb</code><br>
</div>
</p>
	
<p>
<ul>
<li>Vérification de l'installation d'un paquet avec <strong>debi</strong></li>
</ul>
<div style='padding-left: 30pt'>
 <code>sudo debi gentoo_0.9.12-1_i386.changes</code><br>
</div>
</p>
	
<p>
<ul>
<li>Vérification des scripts du responsable d'un paquet : <strong>piuparts</strong></li>
</ul>
   <a href="http://piuparts.debian.org/doc/piuparts.1.html" title="http://piuparts.debian.org/doc/piuparts.1.html">http://piuparts.debian.org/doc/piuparts.1.html</a><br>
<ul style='padding-left: 30pt'>
<li>Les séquences suivantes devraient être essayées :</li>
<li>installation de la version précédente (si elle existe) ;  </li>
<li>mise à niveau depuis la version précédente ;</li>
<li>dégradation (« downgrade ») à la version précédente (optionnel) ;</li>
<li>purge ;</li>
<li>installation du nouveau paquet ;</li>
<li>suppression (« remove ») du paquet ;</li>
<li>installation du paquet, encore ;</li>
<li>purge ; </li>
</ul>
</p>

<p>
<div style='padding-left: 30pt'>
<code>$ piuparts -d wheezy --no-upgrade-test package_amd64.deb</code> <br>
<code>$ piuparts -d wheezy --no-upgrade-test package_amd64.changes</code><br>
</div>
</p>

<p>
<ul>
<li>Exécutez <strong>lintian</strong> sur le fichier .changes.</li>
</ul>
<div style='padding-left: 30pt'>
<code>$ lintian -i -I --show-overrides gentoo_0.9.12-1_i386.changes</code><br>
</div>
</p>

<p>
<ul>
<li>La commande <strong>debc</strong> permet d'énumérer les fichiers du paquet Debian binaire.</li>
</ul>
<div style='padding-left: 30pt'>
<code>$ debc paquet.changes</code><br>
</div>
</p>

<p>
<ul>
<li>La commande debdiff(1) peut comparer les contenus de fichiers entre deux paquets Debian sources.</li>
</ul>
<div style='padding-left: 30pt'>
<code>$ debdiff ancien-paquet.dsc nouveau-paquet.dsc</code><br>
</div>
</p>
	
<p>
<ul>
<li>La commande debdiff(1) permet aussi de comparer les listes de fichiers entre deux ensembles de paquets Debian binaires.</li>
</ul>
<div style='padding-left: 30pt'>
<code>$ debdiff ancien-paquet.changes nouveau-paquet.changes</code><br>
</div>
</p>


<h3>Tools</h3>
<p>
build-essential<br>
autoconf, automake, autotools-dev<br>
debhelper<br>
dh-make<br>
devscripts<br>
fakeroot<br>
file<br>
git<br>
gnupg<br>
lintian<br>
patch, patchutils<br>
pbuilder<br>
quilt<br>
xutils-dev<br>
→ <a href="http://packages.debian.org/wheezy/piuparts" title="http://packages.debian.org/wheezy/piuparts">http://packages.debian.org/wheezy/piuparts</a><br>
</p>




			<!-- End wiki content -->
			</div>
			
			
			<!-- Backlinks -->
			<div class="span-8 last">
			    <hr>>
				Backlinks:
			<!-- End Backlinks -->
			</div>
        </div>
        <div class="footer">
            Fossil version 1.22
        </div>
</body></html>
	</body>
</html>
